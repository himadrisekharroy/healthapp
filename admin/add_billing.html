<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
   <meta charset="utf-8" />
   <title>REMOTE HEALTH | Admin Add  / Edit Billing</title>
   <meta content="width=device-width, initial-scale=1.0" name="viewport" />
   <meta content="" name="description" />
   <meta content="" name="author" />
   <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
   <link href="assets/css/metro.css" rel="stylesheet" />
   <link href="assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
   <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
   <link href="assets/css/style.css" rel="stylesheet" />
   <link href="assets/css/style_responsive.css" rel="stylesheet" />
   <link href="assets/css/style_default.css" rel="stylesheet" id="style_color" />
   <link rel="stylesheet" type="text/css" href="assets/gritter/css/jquery.gritter.css" />
   <link rel="stylesheet" type="text/css" href="assets/uniform/css/uniform.default.css" />
   <link rel="stylesheet" type="text/css" href="assets/chosen-bootstrap/chosen/chosen.css" />
   <link rel="stylesheet" type="text/css" href="assets/bootstrap-wysihtml5/bootstrap-wysihtml5.css" />
   <link rel="stylesheet" type="text/css" href="assets/bootstrap-datepicker/css/datepicker.css" />
   <link rel="stylesheet" type="text/css" href="assets/bootstrap-timepicker/compiled/timepicker.css" />
   <link rel="stylesheet" type="text/css" href="assets/bootstrap-colorpicker/css/colorpicker.css" />
   <link rel="stylesheet" href="assets/bootstrap-toggle-buttons/static/stylesheets/bootstrap-toggle-buttons.css" />
   <link rel="stylesheet" href="assets/data-tables/DT_bootstrap.css" />
   <link rel="stylesheet" type="text/css" href="assets/bootstrap-daterangepicker/daterangepicker.css" />
   <link rel="stylesheet" type="text/css" href="assets/uniform/css/uniform.default.css" />
   <link rel="shortcut icon" href="favicon.ico" />
   <script type="text/javascript" src="assets/js/check_session.js"></script>
    <style>
   .help-inline{
      display:none !important;
   }
   </style>
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="fixed-top">
   <!-- BEGIN HEADER -->
   <div class="header navbar navbar-inverse navbar-fixed-top">
      <!-- BEGIN TOP NAVIGATION BAR -->
      <div class="navbar-inner">
         <div class="container-fluid">
            <!-- BEGIN LOGO -->
            <a class="brand" href="index.html">
            REMOTE HEALTH
            </a>
            <!-- END LOGO -->
            <!-- BEGIN RESPONSIVE MENU TOGGLER -->
            <a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
            <img src="assets/img/menu-toggler.png" alt="" />
            </a>          
            <!-- END RESPONSIVE MENU TOGGLER -->            
            <!-- BEGIN TOP NAVIGATION MENU -->              
            <ul class="nav pull-right">
               <!-- BEGIN NOTIFICATION DROPDOWN -->   
               <li class="dropdown hide" id="header_notification_bar">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="icon-warning-sign"></i>
                  <span class="badge">6</span>
                  </a>
                  <ul class="dropdown-menu extended notification">
                     <li>
                        <p>You have 14 new notifications</p>
                     </li>
                     <li>
                        <a href="#">
                        <span class="label label-success"><i class="icon-plus"></i></span>
                        New user registered. 
                        <span class="time">Just now</span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="label label-important"><i class="icon-bolt"></i></span>
                        Server #12 overloaded. 
                        <span class="time">15 mins</span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="label label-warning"><i class="icon-bell"></i></span>
                        Server #2 not respoding.
                        <span class="time">22 mins</span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="label label-info"><i class="icon-bullhorn"></i></span>
                        Application error.
                        <span class="time">40 mins</span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="label label-important"><i class="icon-bolt"></i></span>
                        Database overloaded 68%. 
                        <span class="time">2 hrs</span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="label label-important"><i class="icon-bolt"></i></span>
                        2 user IP blocked.
                        <span class="time">5 hrs</span>
                        </a>
                     </li>
                     <li class="external">
                        <a href="#">See all notifications <i class="m-icon-swapright"></i></a>
                     </li>
                  </ul>
               </li>
               <!-- END NOTIFICATION DROPDOWN -->
               <!-- BEGIN INBOX DROPDOWN -->
               <li class="dropdown hide" id="header_inbox_bar">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="icon-envelope-alt"></i>
                  <span class="badge">5</span>
                  </a>
                  <ul class="dropdown-menu extended inbox">
                     <li>
                        <p>You have 12 new messages</p>
                     </li>
                     <li>
                        <a href="#">
                        <span class="photo"><img src="./assets/img/avatar2.jpg" alt="" /></span>
                        <span class="subject">
                        <span class="from">Lisa Wong</span>
                        <span class="time">Just Now</span>
                        </span>
                        <span class="message">
                        Vivamus sed auctor nibh congue nibh. auctor nibh
                        auctor nibh...
                        </span>  
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="photo"><img src="./assets/img/avatar3.jpg" alt="" /></span>
                        <span class="subject">
                        <span class="from">Richard Doe</span>
                        <span class="time">16 mins</span>
                        </span>
                        <span class="message">
                        Vivamus sed congue nibh auctor nibh congue nibh. auctor nibh
                        auctor nibh...
                        </span>  
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="photo"><img src="./assets/img/avatar1.jpg" alt="" /></span>
                        <span class="subject">
                        <span class="from">Bob Nilson</span>
                        <span class="time">2 hrs</span>
                        </span>
                        <span class="message">
                        Vivamus sed nibh auctor nibh congue nibh. auctor nibh
                        auctor nibh...
                        </span>  
                        </a>
                     </li>
                     <li class="external">
                        <a href="#">See all messages <i class="m-icon-swapright"></i></a>
                     </li>
                  </ul>
               </li>
               <!-- END INBOX DROPDOWN -->
               <!-- BEGIN TODO DROPDOWN -->
               <li class="dropdown hide" id="header_task_bar">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="icon-tasks"></i>
                  <span class="badge">5</span>
                  </a>
                  <ul class="dropdown-menu extended tasks">
                     <li>
                        <p>You have 12 pending tasks</p>
                     </li>
                     <li>
                        <a href="#">
                        <span class="task">
                        <span class="desc">New release v1.2</span>
                        <span class="percent">30%</span>
                        </span>
                        <span class="progress progress-success ">
                        <span style="width: 30%;" class="bar"></span>
                        </span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="task">
                        <span class="desc">Application deployment</span>
                        <span class="percent">65%</span>
                        </span>
                        <span class="progress progress-danger progress-striped active">
                        <span style="width: 65%;" class="bar"></span>
                        </span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="task">
                        <span class="desc">Mobile app release</span>
                        <span class="percent">98%</span>
                        </span>
                        <span class="progress progress-success">
                        <span style="width: 98%;" class="bar"></span>
                        </span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="task">
                        <span class="desc">Database migration</span>
                        <span class="percent">10%</span>
                        </span>
                        <span class="progress progress-warning progress-striped">
                        <span style="width: 10%;" class="bar"></span>
                        </span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="task">
                        <span class="desc">Web server upgrade</span>
                        <span class="percent">58%</span>
                        </span>
                        <span class="progress progress-info">
                        <span style="width: 58%;" class="bar"></span>
                        </span>
                        </a>
                     </li>
                     <li>
                        <a href="#">
                        <span class="task">
                        <span class="desc">Mobile development</span>
                        <span class="percent">85%</span>
                        </span>
                        <span class="progress progress-success">
                        <span style="width: 85%;" class="bar"></span>
                        </span>
                        </a>
                     </li>
                     <li class="external">
                        <a href="#">See all tasks <i class="m-icon-swapright"></i></a>
                     </li>
                  </ul>
               </li>
               <!-- END TODO DROPDOWN -->
               <!-- BEGIN USER LOGIN DROPDOWN -->
               <li class="dropdown user">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						
						<span class="username">&nbsp;</span>
						<i class="icon-angle-down"></i>
						</a>
						<ul class="dropdown-menu">							
							<li><a href="javascript:void(0);" id="logout_link"><i class="icon-key"></i> Log Out</a></li>
						</ul>
					</li>
               <!-- END USER LOGIN DROPDOWN -->
            </ul>
            <!-- END TOP NAVIGATION MENU --> 
         </div>
      </div>
      <!-- END TOP NAVIGATION BAR -->
   </div>
   <!-- END HEADER -->
   <!-- BEGIN CONTAINER -->
   <div class="page-container row-fluid">
      <!-- BEGIN SIDEBAR -->
      <div class="page-sidebar nav-collapse collapse">
         <!-- BEGIN SIDEBAR MENU -->         
         
         <!-- END SIDEBAR MENU -->
      </div>
      <!-- END SIDEBAR -->
      <!-- BEGIN PAGE -->  
      <div class="page-content">
         <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
         <div id="portlet-config" class="modal hide">
            <div class="modal-header">
               <button data-dismiss="modal" class="close" type="button"></button>
               <h3>portlet Settings</h3>
            </div>
            <div class="modal-body">
               <p>Here will be a configuration form</p>
            </div>
         </div>
         <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
         <!-- BEGIN PAGE CONTAINER-->
         <div class="container-fluid">
            <!-- BEGIN PAGE HEADER-->   
            <div class="row-fluid">
               <div class="span12">
                  <!-- BEGIN STYLE CUSTOMIZER -->
                  <div class="color-panel hidden-phone">
                     <div class="color-mode-icons icon-color"></div>
                     <div class="color-mode-icons icon-color-close"></div>
                     <div class="color-mode">
                        <p>THEME COLOR</p>
                        <ul class="inline">
                           <li class="color-black current color-default" data-style="default"></li>
                           <li class="color-blue" data-style="blue"></li>
                           <li class="color-brown" data-style="brown"></li>
                           <li class="color-purple" data-style="purple"></li>
                           <li class="color-white color-light" data-style="light"></li>
                        </ul>
                        <label class="hidden-phone">
                        <input type="checkbox" class="header" checked value="" />
                        <span class="color-mode-label">Fixed Header</span>
                        </label>                    
                     </div>
                  </div>
                  <!-- END BEGIN STYLE CUSTOMIZER -->     
                  <h3 class="page-title">
                     Billing
                     <small> </small>
                  </h3>
                  <ul class="breadcrumb">
                     <li>
                        <i class="icon-home"></i>
                        <a href="index.html">Home</a> 
                        <span class="icon-angle-right"></span>
                     </li>
                     <li>
                        <a href="billing.html">Billing</a>
                        <span class="icon-angle-right"></span> 
                     </li>
                     <li><a href="javascript:void(0);"><font class='opt_type'>Add</font> Billing</a></li>
                  </ul>
               </div>
            </div>
            <!-- END PAGE HEADER-->
            <!-- BEGIN PAGE CONTENT-->
            
            <div class="row-fluid">
               <div class="span12">
                  <!-- BEGIN VALIDATION BANKS-->
                  <div class="portlet box purple">
                     <div class="portlet-title">
                        <h4 id='v_demography'><i class="icon-reorder"></i><font class='opt_type'>Add</font> Billing <font id='v_demography'></font></h4>
                        <div class="tools">
                           <a href="javascript:;" class="collapse"></a>
                          <!-- <a href="#portlet-config" data-toggle="modal" class="config"></a>-->
                           <a href="javascript:;" class="reload"></a>
                          <!-- <a href="javascript:;" class="remove"></a>-->
                        </div>
                     </div>
                     <div class="portlet-body form">
                        <!-- BEGIN FORM-->
                        <form action="#" id="form_sample_1" class="form-horizontal">
                           <div class="alert alert-error hide">
                              <button class="close" data-dismiss="alert"></button>
                              <font id="err">You have some form errors. Please check below.</font>
                           </div>
                           <div class="alert alert-success hide">
                              <button class="close" data-dismiss="alert"></button>
                              <font id="succ">Your form validation is successful!</font>
                           </div>
                           <div class="row-fluid">
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Plan Name<span class="required">*</span></label>
                              <div class="controls">
                                 <select class="span6 m-wrap" name="plan_id" id="plan_id">
                                       <option value="">Select...</option>                                   
                                 </select>
                              </div>
                                 </div>  
                              </div>
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Plan Type<span class="required">*</span></label>
                              <div class="controls" id="plan_type_input_sec">
                                 
                              </div>
                                 </div>
                              </div>
                           </div>

                           <div class="row-fluid">
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Amount Paid<span class="required">*</span></label>
                              <div class="controls">
                                 <input type="text" name="amount" data-required="1" class="span12 m-wrap" id="amount"/>
                              </div>
                                 </div>  
                              </div>
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Payment Mode<span class="required">*</span></label>
                              <div class="controls">
                                 <select class="span6 m-wrap" name="payment_method_id" id="payment_method_id">
                                       <option value="">Select...</option>                                   
                                 </select>
                              </div>
                                 </div>
                              </div>
                           </div>

                           <div class="row-fluid">

                              <div class="span6">
                                 <div class="control-group">
                                    <label class="control-label">Billing Cycle</label>
                                    <div class="controls">
                                       <select class="span6 m-wrap" name="billing_cycle_id" id="billing_cycle_id">
                                          <option value="">Select...</option>                                   
                                       </select>                                 
                                    </div>
                                 </div>  
                              </div>

                              
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Aadhar No</label> 
                              <div class="controls">
                                 <input type="text" name="aadhar" data-required="1" class="span12 m-wrap" id="aadhar"/>
                              </div>
                                 </div>
                              </div>
                           </div>

                           <div class="row-fluid">

                              <div class="span6">
                                 <div class="control-group">
                                    <label class="control-label">Plan Validity<span class="required">*</span></label>
                                    <div class="controls">
                                       <div class="input-append date date-picker" data-date="12-06-2018" data-date-format="dd-mm-yyyy" data-date-viewmode="years">
                                          <input class="m-wrap m-ctrl-medium date-picker" size="16" type="text" value="" name="validity" id="validity" placeholder="mm/dd/yyyy"/>
                                          <span class="add-on"><i class="icon-calendar"></i></span>
                                       </div>
                                    </div>
                                 </div>  
                              </div>

                              
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Bank Name</label> 
                              <div class="controls">
                                 <select class="span12 m-wrap" name="bank_id" id="bank_id">
                                       <option value="">Select...</option>                                   
                                 </select>                                  
                              </div>
                                 </div>
                              </div>
                           </div>

                           <div class="row-fluid">
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">IFSC</label>
                              <div class="controls">
                                  <input type="text" name="ifsc" data-required="1" class="span12 m-wrap" id="ifsc"/>
                                 
                              </div>
                                 </div>  
                              </div>
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Account No.</label> 
                              <div class="controls">
                                 <input type="text" name="acc_no" data-required="1" class="span12 m-wrap" id="acc_no"/>
                              </div>
                                 </div>
                              </div>
                           </div>

                            <div class="row-fluid">
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Cheque No.</label>
                              <div class="controls">
                                 <input type="text" name="cheque_no" data-required="1" class="span12 m-wrap" id="cheque_no"/>
                              </div>
                                 </div>  
                              </div>
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">Collection Agent Name<span class="required">*</span></label> 
                              <div class="controls">
                                 <input type="text" name="agent_name" data-required="1" class="span12 m-wrap" id="agent_name"/>
                              </div>
                                 </div>
                              </div>
                           </div>

                          <div class="row-fluid">
                              <div class="span6">
                                 <div class="control-group">
                              <label class="control-label">GST No.</label>
                              <div class="controls">
                                 <input type="text" name="gst_no" data-required="1" class="span12 m-wrap" id="gst_no"/>
                              </div>
                                 </div>  
                              </div>
                              
                           </div>
                          
                           <div class="form-actions">
                           <input type="hidden" name="edit_id" id="edit_id" value="">
                              <input type="hidden" name="vendor_id" id="vendor_id" value="">
                              <button type="submit" class="btn purple">Submit</button>
                              <!--<button type="button" class="btn">Cancel</button>-->
                           </div>
                        </form>
                        <!-- END FORM-->
                     </div>
                  </div>
                  <!-- END VALIDATION BANKS-->
               </div>
            </div>
            
            <!-- END PAGE CONTENT-->         
         </div>
         <!-- END PAGE CONTAINER-->
      </div>
      <!-- END PAGE -->  
   </div>
   <!-- END CONTAINER -->
   <!-- BEGIN FOOTER -->
   <div class="footer">
      2020 &copy; REMOTE HEALTH Admin.
      <div class="span pull-right">
         <span class="go-top"><i class="icon-angle-up"></i></span>
      </div>
   </div>
   <!-- END FOOTER -->
   <!-- BEGIN JAVASCRIPTS -->    
   <script src="assets/js/config.js"></script>
   <!-- Load javascripts at bottom, this will reduce page load time -->
   <script src="assets/js/jquery-1.8.3.min.js"></script>    
   <script src="assets/breakpoints/breakpoints.js"></script>      
   <script src="assets/bootstrap/js/bootstrap.min.js"></script>
   <script src="assets/js/jquery.blockui.js"></script>
   <script src="assets/js/jquery.cookie.js"></script>
   <!-- ie8 fixes -->
   <!--[if lt IE 9]>
   <script src="assets/js/excanvas.js"></script>
   <script src="assets/js/respond.js"></script>
   <![endif]-->
   <script type="text/javascript" src="assets/chosen-bootstrap/chosen/chosen.jquery.min.js"></script>
   <script type="text/javascript" src="assets/uniform/jquery.uniform.min.js"></script>
   <script type="text/javascript" src="assets/bootstrap-wysihtml5/wysihtml5-0.3.0.js"></script> 
   <script type="text/javascript" src="assets/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script>
   <script type="text/javascript" src="assets/bootstrap-toggle-buttons/static/js/jquery.toggle.buttons.js"></script>
   <script type="text/javascript" src="assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
   <script type="text/javascript" src="assets/bootstrap-daterangepicker/date.js"></script>
   <script type="text/javascript" src="assets/bootstrap-daterangepicker/daterangepicker.js"></script> 
   <script type="text/javascript" src="assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>  
   <script type="text/javascript" src="assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
   <script type="text/javascript" src="assets/jquery-validation/dist/jquery.validate.min.js"></script>
   <script type="text/javascript" src="assets/jquery-validation/dist/additional-methods.min.js"></script>
   <script src="assets/js/app.js"></script>     
   <script>
      jQuery(document).ready(function() {  
	  
	  $(".btn").prop( "disabled", true ); 
         // initiate layout and plugins
		var url = window.location.href;
		var name1 ="vid";
		var value1 ="";
		name1 = name1.replace(/[\[\]]/g, "\\$&");
		var regex1 = new RegExp("[?&]" + name1 + "(=([^&#]*)|&|#|$)");
		var results1 = regex1.exec(url);
		if (!results1) value1 = null;
		else if (!results1[2]) value1 = '';
		else value1 = decodeURIComponent(results1[2].replace(/\+/g, " "));

      var name2 ="id";
      var value2 ="";
      name2 = name2.replace(/[\[\]]/g, "\\$&");
      var regex2 = new RegExp("[?&]" + name2 + "(=([^&#]*)|&|#|$)");
      var results2 = regex2.exec(url);
      if (!results2) value2 = null;
      else if (!results2[2]) value2 = '';
      else value2 = decodeURIComponent(results2[2].replace(/\+/g, " "));


		if(value1 ) 
		{
			checkPermission(window.sessionStorage.getItem("admin_id"), 16, 'add'); // admin_id, module_id, role_type
			$(".page-title small").html('Add');
			$("#vendor_id").val(value1);
         
			$(".page-sidebar").load("nav.html",function(response, status){
				$(".page-sidebar li").removeClass("active");
				if($(".page-sidebar li span").hasClass("arrow"))
				{
					$(".page-sidebar li span").removeClass("open");
				}
				$("#billing").addClass("active").addClass("open");
				if($("#billing span").hasClass("arrow"))
				{
					$("#billing span").addClass("open");	
				}
				$("#add_billing").addClass("active");					
						
			});
         $.post( api_url + "/sd_vendors.php", { func:"get_data", id:value1})
            .done(function(data){
               
               data = JSON.parse(data);
               var shop_name = data.data.shop_name ? '<i class="icon-shopping-cart"></i>'+ data.data.shop_name : "";
               var vendor_name = data.data.vendor_fname + " "+data.data.vendor_lname;
               vendor_name = vendor_name.trim();
               vendor_name = vendor_name ? '<i class="icon-user"></i>'+ vendor_name :"";

               var vendor_mobile =data.data.vendor_mobile ? '<i class="icon-phone-sign"></i>'+data.data.vendor_mobile:"" ;
               
               var htmlTxt = '<i class="icon-reorder"></i>Add Billing &nbsp; &nbsp;'+shop_name +"&nbsp;&nbsp;&nbsp;"+vendor_name+"&nbsp; &nbsp; &nbsp;"+ vendor_mobile;
               $("#v_demography").html(htmlTxt);
               
               $.post( api_url + "/sd_plan.php", { func:"active_list"})
               .done(function(data){
                  //alert(data);
                  data = JSON.parse(data);
                  for(var key in data.data)
                  {
                     $("#plan_id").append(new Option(data.data[key]['plan_name'], data.data[key]['plan_id']));
                  }                  
               }); 

               $.post( api_url + "/sd_payment_method.php", { func:"active_list"})
               .done(function(data){
                  //alert(data);
                  data = JSON.parse(data);
                  for(var key in data.data)
                  {
                     $("#payment_method_id").append(new Option(data.data[key]['method_name'], data.data[key]['payment_method_id']));
                  }                  
               });

               $.post( api_url + "/sd_billing_cycle.php", { func:"active_list"})
               .done(function(data){
                  //alert(data);
                  data = JSON.parse(data);
                  for(var key in data.data)
                  {
                     $("#billing_cycle_id").append(new Option(data.data[key]['billing_cycle_name'], data.data[key]['billing_cycle_id']));
                  }                  
               });

               

               $.post( api_url + "/sd_bank.php", { func:"active_list"})
               .done(function(data){
                  //alert(data);
                  data = JSON.parse(data);
                  for(var key in data.data)
                  {
                     $("#bank_id").append(new Option(data.data[key]['bank_name'], data.data[key]['bank_id']));
                  }                  
               });

               $.post( api_url + "/sd_plan_type.php", { func:"active_list"})
               .done(function(data){
                  
                  var plan_type_html = "";
                  data = JSON.parse(data);
                  console.log(data);
                  for(var key in data.data)
                  {
                     plan_type_html += '<label class="checkbox ">';
                     plan_type_html += '<input type="checkbox" name="plan_type_ids[]" value="' + data.data[key]['plan_type_id']+'" /> '+data.data[key]['plan_type_name']+' &nbsp;&nbsp;';
                     plan_type_html += '</label>';                     
                  } 
                                 
                  $("#plan_type_input_sec").html(plan_type_html);  

                  $(".btn").prop( "disabled", false ); 
                  App.setPage("billing_form_validation"); 
                  App.init();                
               });

                            
            });
			 
		}
		else if(value2) 
		{	
			checkPermission(window.sessionStorage.getItem("admin_id"), 16, 'edit'); // admin_id, module_id, role_type
			$(".page-title small").html('Edit');
         $(".opt_type").html('Edit');		
			$("#edit_id").val(value2);

			$(".page-sidebar").load("nav.html",function(response, status){
			$(".page-sidebar li").removeClass("active");
			if($(".page-sidebar li span").hasClass("arrow"))
			{
				$(".page-sidebar li span").removeClass("open");
			}
			$("#billing").addClass("active").addClass("open");
			if($("#billing span").hasClass("arrow"))
			{
				$("#billing span").addClass("open");	
			}
			$("#add_billing").addClass("active");
		
			$.post( api_url + "/sd_billing.php", { func:"get_data", id:value2})
				.done(function(data){
					//alert(data);
					billing_data = JSON.parse(data);
					console.log(billing_data);
					$.post( api_url + "/sd_vendors.php", { func:"get_data", id:billing_data.data.vendor_id})
               .done(function(data){
                  
                  data = JSON.parse(data);
                  var shop_name = data.data.shop_name ? '<i class="icon-shopping-cart"></i>'+ data.data.shop_name : "";
                  var vendor_name = data.data.vendor_fname + " "+data.data.vendor_lname;
                  vendor_name = vendor_name.trim();
                  vendor_name = vendor_name ? '<i class="icon-user"></i>'+ vendor_name :"";

                  var vendor_mobile =data.data.vendor_mobile ? '<i class="icon-phone-sign"></i>'+data.data.vendor_mobile:"" ;
                  
                  var htmlTxt = '<i class="icon-reorder"></i>Edit Billing &nbsp; &nbsp;'+shop_name +"&nbsp;&nbsp;&nbsp;"+vendor_name+"&nbsp; &nbsp; &nbsp;"+ vendor_mobile;
                  $("#v_demography").html(htmlTxt);

                  $.post( api_url + "/sd_plan.php", { func:"active_list"})
                  .done(function(data){
                     //alert(data);
                     data = JSON.parse(data);
                     for(var key in data.data)
                     {
                        $("#plan_id").append(new Option(data.data[key]['plan_name'], data.data[key]['plan_id']));
                     }

                     $.post( api_url + "/sd_payment_method.php", { func:"active_list"})
                     .done(function(data){
                        //alert(data);
                        data = JSON.parse(data);
                        for(var key in data.data)
                        {
                           $("#payment_method_id").append(new Option(data.data[key]['method_name'], data.data[key]['payment_method_id']));
                        }

                        $.post( api_url + "/sd_billing_cycle.php", { func:"active_list"})
                        .done(function(data){
                           //alert(data);
                           data = JSON.parse(data);
                           for(var key in data.data)
                           {
                              $("#billing_cycle_id").append(new Option(data.data[key]['billing_cycle_name'], data.data[key]['billing_cycle_id']));
                           }
                           $.post( api_url + "/sd_bank.php", { func:"active_list"})
                           .done(function(data){
                              //alert(data);
                              data = JSON.parse(data);
                              for(var key in data.data)
                              {
                                 $("#bank_id").append(new Option(data.data[key]['bank_name'], data.data[key]['bank_id']));
                              }
                              $.post( api_url + "/sd_plan_type.php", { func:"active_list"})
                              .done(function(data){
                                 
                                 var plan_type_html = "";
                                 data = JSON.parse(data);
                                 for(var key in data.data)
                                 {
                                    plan_type_html += '<label class="checkbox ">';
                                    plan_type_html += '<input type="checkbox" name="plan_type_ids[]" value="' + data.data[key]['plan_type_id']+'" /> '+data.data[key]['plan_type_name']+' &nbsp;&nbsp;';
                                    plan_type_html += '</label>';                     
                                 } 
                                                
                                 $("#plan_type_input_sec").html(plan_type_html);
                                 
                                 $("#plan_id").val(billing_data.data.plan_id);
                                 $("#amount").val(billing_data.data.amount); 
                                 $("#payment_method_id").val(billing_data.data.payment_method_id); 
                                 $("#validity").val(billing_data.data.validity); 
                                 $("#aadhar").val(billing_data.data.aadhar); 
                                 $("#billing_cycle_id").val(billing_data.data.billing_cycle_id); 
                                 $("#bank_id").val(billing_data.data.bank_id); 
                                 $("#ifsc").val(billing_data.data.ifsc); 
                                 $("#gst_no").val(billing_data.data.gst_no); 
                                 $("#acc_no").val(billing_data.data.acc_no); 
                                 $("#cheque_no").val(billing_data.data.cheque_no);
                                 $("#agent_name").val(billing_data.data.agent_name);

                                 for(var key in billing_data.data.plan_type_id)
                                 {
                                    $("input[name='plan_type_ids[]'][value=" + billing_data.data.plan_type_id[key] + "]").prop('checked', true);
                                 }
                                 //
                                 $(".btn").prop( "disabled", false );
                                 App.setPage("billing_form_validation"); 
                                 App.init();
                              });
                           });
                        });
                     });
                  });
               });              		
				});
			});		
		}
      });
	  
   jQuery(document).on('change', '#billing_cycle_id', function(){
      var billing_cycle_id = $(this).val();
      var today = new Date();
      if(billing_cycle_id == 1) // weekly
      {
         
         var nextweek = new Date(today.getFullYear(), today.getMonth(), today.getDate()+7);
         
         var mnth = (1 + nextweek.getMonth()).toString();
         mnth = mnth.length > 1 ? mnth : '0' + mnth;

         var day = nextweek.getDate().toString();
         day = day.length > 1 ? day : '0' + day;

         $("#validity").val(mnth+"/"+day+"/"+nextweek.getFullYear())
      }
      else if(billing_cycle_id == 2) // monthly
      {
         var nextweek = new Date(today.getFullYear(), today.getMonth(), today.getDate()+30);
         
         var mnth = (1 + nextweek.getMonth()).toString();
         mnth = mnth.length > 1 ? mnth : '0' + mnth;

         var day = nextweek.getDate().toString();
         day = day.length > 1 ? day : '0' + day;

         $("#validity").val(mnth+"/"+day+"/"+nextweek.getFullYear())
      }
      else if(billing_cycle_id == 3) // querterly
      {
         var nextweek = new Date(today.getFullYear(), today.getMonth(), today.getDate()+90);
         
         var mnth = (1 + nextweek.getMonth()).toString();
         mnth = mnth.length > 1 ? mnth : '0' + mnth;

         var day = nextweek.getDate().toString();
         day = day.length > 1 ? day : '0' + day;

         $("#validity").val(mnth+"/"+day+"/"+nextweek.getFullYear())
      }
      else if(billing_cycle_id == 4) // yearly
      {
         var nextweek = new Date(today.getFullYear(), today.getMonth(), today.getDate()+365);
         
         var mnth = (1 + nextweek.getMonth()).toString();
         mnth = mnth.length > 1 ? mnth : '0' + mnth;

         var day = nextweek.getDate().toString();
         day = day.length > 1 ? day : '0' + day;

         $("#validity").val(mnth+"/"+day+"/"+nextweek.getFullYear())
      }
   })

   </script>
   <!-- END JAVASCRIPTS -->   
</body>
<!-- END BODY -->
</html>